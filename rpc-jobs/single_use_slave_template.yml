- job:
    name: Single_Use_Slave_Example
    project-type: workflow
    concurrent: true
    parameters:
      # Default params are provided by macro, add any extra params, or
      # params you want to override the defaults for.
      - single_use_slave_params
    dsl: |
      node(){
        try {
          dir("rpc-gating"){
              git branch: env.RPC_GATING_BRANCH, url: env.RPC_GATING_REPO
              pubCloudSlave = load 'pipeline-steps/pub_cloud_slave_highlevel.groovy'
          }
          resources = pubCloudSlave.getPubCloudSlave()
          node(resources.created[0].name){
            stage("Your Stage"){
              sh """
                hostname; date
                echo "your script here"
              """
            }
          }
        } finally {
          pubCloudSlave.delPubCloudSlave(resources)
        }
      }
